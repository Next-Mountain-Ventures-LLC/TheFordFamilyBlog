---
import BaseLayout from "@/layouts/BaseLayout.astro";
import ContactForm from '@/components/ContactForm';
import HeroSection from '@/components/HeroSection';
import FamilyMember from '@/components/FamilyMember';
import { Image } from 'astro:assets';
import joshuaImage from '../assets/img_9071_nw_c2f17e0f.jpg';
import saliciaImage from '../assets/salicias-profile_nw_7fb06e56.jpg';
import jacksonImage from '../assets/jackson_ford_nw_10531fa1.jpg';
import finleyImage from '../assets/finley-profile-image_nw_40f934be.jpg';
import BlogPreview from '@/components/BlogPreview';
import SubscribeForm from '@/components/SubscribeForm';
import { buttonVariants } from "@/components/ui/button";
import { getPosts } from '@/lib/wordpress';

// Fallback blog posts data
const fallbackPosts = [
  {
    id: 1,
    title: "Road Blocks: Navigating the Entrepreneurial Journey",
    excerpt: "Insights on overcoming common obstacles entrepreneurs face while building their businesses.",
    date: "September 24, 2025",
    author: "Joshua Ford",
    category: "Entrepreneurship",
    imageUrl: joshuaImage.src,
    slug: "road-blocks",
    content: ""
  },
  {
    id: 2,
    title: "Finding Strength in Faith Through Health Challenges",
    excerpt: "How our family relies on faith during difficult times with chronic illness and health challenges.",
    date: "June 12, 2025",
    author: "Salicia Ford",
    category: "Faith & Health",
    imageUrl: saliciaImage.src,
    slug: "faith-through-health-challenges",
    content: ""
  },
  {
    id: 3,
    title: "Homeschooling Tips for ADHD Children",
    excerpt: "Practical strategies and templates for creating a successful homeschooling environment for children with ADHD.",
    date: "June 5, 2025",
    author: "Salicia Ford",
    category: "Homeschooling",
    imageUrl: saliciaImage.src,
    slug: "homeschooling-tips-adhd",
    content: ""
  }
];

// Fetch blog posts from WordPress API
let blogPosts = fallbackPosts;
try {
  console.log("Attempting to fetch WordPress posts...");
  blogPosts = await getPosts(3);
  console.log("Successfully fetched WordPress posts:", blogPosts);
} catch (error) {
  console.error('Error fetching WordPress posts:', error);
  console.log("Using fallback blog post data instead");
}

// YouTube videos are now fetched directly from the YouTube channel
---

<BaseLayout
  title="The Ford Family - Faith, Health, Homeschooling & Entrepreneurship"
  description="The Ford Family blog sharing our journey through faith, health challenges, homeschooling, entrepreneurship, and creativity."
>
  <!-- Hero Section -->
  <HeroSection client:load />
  
  <!-- Subscribe Form Section -->
  <section class="py-8 bg-secondary/5 border-y border-primary/5">
    <div class="container max-w-md mx-auto">
      <div class="scrapbook-paper bg-white/95">
        <h2 class="text-xl md:text-2xl font-bold font-display mb-2 text-center text-secondary-foreground">
          Subscribe to Our Newsletter
        </h2>
        <p class="text-sm text-center text-muted-foreground mb-4">
          Get updates on homeschooling, health challenges, and our family adventures directly to your inbox.
        </p>
        <SubscribeForm client:load />
      </div>
    </div>
  </section>
  
  <!-- Family Members Section -->
  <section id="family" class="py-20 bg-muted/10">
    <div class="container mx-auto">
      <h2 class="text-3xl md:text-4xl font-bold font-display mb-6 text-center text-primary-foreground animate-on-scroll">
        About Our Family
      </h2>
      
      <div class="max-w-3xl mx-auto mb-16 text-center">
        <p class="text-lg mb-4 animate-on-scroll">
          The Ford family journey is about navigating life's challenges together through faith, supporting each other through health battles, homeschooling our children, and pursuing entrepreneurial dreams that align with our values.
        </p>
        <p class="mb-8 animate-on-scroll">
          Each of us brings our unique gifts and passions to our family story, creating a tapestry of creativity, resilience, faith, and love that we're excited to share with you through our blog and videos.
        </p>
      </div>
      
      <div class="space-y-24">
        <!-- Salicia -->
        <FamilyMember 
          client:load
          name="Salicia Ford" 
          role="Patient Advocate & Homeschool Mom" 
          description="Salicia battles rare autoimmune diseases including Sjogren's syndrome while homeschooling our children and helping families bring order to chaotic lives through Anchor and Bloom." 
          interests={["Chronic Illness Advocacy", "Homeschooling", "Emotional Regulation", "ADHD Support", "Faith"]} 
          imageUrl={saliciaImage.src}
          rotate="-2deg"
          link="/blog"
          direction="left"
        />
        
        <!-- Joshua -->
        <FamilyMember 
          client:load
          name="Joshua Ford" 
          role="Entrepreneur & Inventor" 
          description="Joshua runs Next Mountain Ventures, a creative studio helping entrepreneurs launch and grow. He's passionate about web design, 3D printing, laser cutting, and building e-bikes." 
          interests={["Entrepreneurship", "Web Design", "Inventions", "Patient Advocacy", "3D Printing"]} 
          imageUrl={joshuaImage.src}
          rotate="2deg"
          link="/blog"
          direction="right"
        />
        
        <!-- Jackson -->
        <FamilyMember 
          client:load
          name="Jackson Ford" 
          role="Young Inventor & Entrepreneur" 
          description="Jackson loves 3D printing and inventing. He sells online 3D products, teaches kids about finances and business, and has his own modeling portfolio." 
          interests={["3D Printing", "Invention", "Entrepreneurship", "Modeling", "Finance Education"]} 
          imageUrl={jacksonImage.src} 
          rotate="-2deg"
          link="/blog"
          direction="left"
        />
        
        <!-- Finley -->
        <FamilyMember 
          client:load
          name="Finley Ford" 
          role="Designer & Aspiring Actress" 
          description="Finley is passionate about design and acting. She has her own YouTube channel featuring 'Get Ready With Me' videos with her mother and maintains a modeling portfolio." 
          interests={["Design", "Acting", "YouTube Content", "Modeling", "Fashion"]} 
          imageUrl={finleyImage.src} 
          rotate="3deg"
          link="/blog"
          direction="right"
        />
      </div>
    </div>
  </section>
  
  <!-- Blog Preview Section - These link to actual blog post pages -->
  <BlogPreview client:visible title="Latest Blog Posts" posts={blogPosts} />
  
  <!-- Contact Section -->
  <section class="py-16">
    <div class="container mx-auto">
      <div class="scrapbook-paper">
        <h2 class="text-3xl md:text-4xl font-bold font-display mb-6 text-center text-primary-foreground animate-on-scroll">
          Connect With Us
        </h2>
        <p class="text-center mb-8 max-w-2xl mx-auto animate-on-scroll">
          Have questions or want to collaborate? Drop us a message, and we'll get back to you soon!
        </p>
        <!-- KEEP ALL FORMS client:load !! DO NOT USE client:visible AS THIS CAUSES HYDRATION ISSUES!!-->
        <div class="animate-on-scroll">
          <ContactForm client:load />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
