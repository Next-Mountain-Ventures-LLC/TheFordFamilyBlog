---
import BlogLayout from "@/layouts/BlogLayout.astro";
import { getCollection } from 'astro:content';

// Get the blog post from content collection
const allPosts = await getCollection('blog');
const homeschoolingJourneyPost = allPosts.find((post) => {
  return post.slug.startsWith('homeschooling-journey');
});

// Check if post exists
if (!homeschoolingJourneyPost) {
  throw new Error('Blog post not found');
}

const { Content } = await homeschoolingJourneyPost.render();

const post = {
  title: homeschoolingJourneyPost.data.title,
  description: homeschoolingJourneyPost.data.description,
  date: homeschoolingJourneyPost.data.date,
  author: homeschoolingJourneyPost.data.author,
  category: homeschoolingJourneyPost.data.category,
  imageUrl: homeschoolingJourneyPost.data.imageUrl,
  slug: homeschoolingJourneyPost.slug.replace(/_nw_.*$/, '') // Remove the signature from slug for URL
};
---

<BlogLayout
  title={post.title}
  description={post.description}
  author={post.author}
  date={post.date}
  category={post.category}
  imageUrl={post.imageUrl}
>
  <Content />
</BlogLayout>