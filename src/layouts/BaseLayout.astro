---
import HeadSEO from "@/components/HeadSEO.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import "../styles/fonts.css";

interface Props {
  title?: string | undefined;
  description?: string | undefined;
  ogImage?: URL | undefined;
}

const { title, description, ogImage } = Astro.props;
const defaultTitle = "The Ford Family";
const defaultDescription = "Our family blog sharing our journey through faith, health challenges, homeschooling, entrepreneurship, and creativity.";
---

<html lang="en">
  <head>
    <HeadSEO 
      title={title || defaultTitle} 
      description={description || defaultDescription} 
      ogImage={ogImage} 
    />
  </head>
  <body class="bg-background min-h-screen font-sans antialiased">
    <script is:inline>
      // Add scroll animation observer
      document.addEventListener('DOMContentLoaded', () => {
        // For regular animate-on-scroll elements - standard behavior
        const standardObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('animate-visible');
            }
          });
        }, { threshold: 0.1 });

        document.querySelectorAll('.animate-on-scroll').forEach(element => {
          standardObserver.observe(element);
        });
        
        // For hero photos - start in line, then animate to staggered positions
        // We'll animate when the user scrolls a bit down the page
        const heroObserver = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            // The key difference - we animate when user scrolls away from the section 
            // rather than when scrolling to it
            if (!entry.isIntersecting) {
              const heroPhotos = document.querySelectorAll('.hero-photo-1, .hero-photo-2, .hero-photo-3, .hero-photo-4');
              heroPhotos.forEach((photo, index) => {
                // Add slight delay between animations for staggered effect
                photo.style.transitionDelay = `${index * 0.15}s`;
                photo.classList.add('animate-visible');
              });
            }
          });
        }, { threshold: 0.9 }); // Higher threshold to trigger sooner
        
        // We only need to observe one element (the hero section) to trigger all photo animations
        const heroSection = document.querySelector('section:first-of-type');
        if (heroSection) {
          heroObserver.observe(heroSection);
        }
      });
    </script>
    <div class="relative flex min-h-screen flex-col">
      <Header />
      <main class="flex-auto">
        <slot />
      </main>
      <!-- DO NOT REMOVE - Necessary for making visual edits via new.website! -->
      <script src="https://api.new.website/static/new-website.js"></script>
      <Footer />
    </div>
  </body>
</html>
