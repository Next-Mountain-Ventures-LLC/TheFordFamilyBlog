---
import { Image } from 'astro:assets';

// Import all free stuff images
import img1 from '../assets/img_2718_nw_afe5f144.jpeg';
import img2 from '../assets/img_2719_nw_d0625901.jpeg';
import img3 from '../assets/img_2720_nw_d54e608c.jpeg';
import img4 from '../assets/img_2721_nw_5ccf2e8f.jpeg';
import img5 from '../assets/img_2722_nw_1b2522f8.jpeg';
import img6 from '../assets/img_2723_nw_db7f2498.jpeg';
import img7 from '../assets/img_2724_nw_43210e19.jpeg';
import img8 from '../assets/img_2725_nw_73296f6e.jpeg';
import img9 from '../assets/img_2726_nw_d9d3ce2e.jpeg';
import img10 from '../assets/img_2727_nw_a3f54761.jpeg';
import img11 from '../assets/img_2728_nw_d2152b8e.jpeg';
import img12 from '../assets/img_2729_nw_1b124e30.jpeg';
import img13 from '../assets/img_2730_nw_835622b9.jpeg';
import img14 from '../assets/img_2731_nw_eb3266e1.jpeg';
import img15 from '../assets/img_2732_nw_a4015955.jpeg';
import img16 from '../assets/img_2733_nw_b09dd68e.jpeg';
import img17 from '../assets/img_2734_nw_55c0a1c1.jpeg';
import img18 from '../assets/img_2735_nw_53c3232b.jpeg';
import img19 from '../assets/img_2736_nw_4758c97b.jpeg';
import img20 from '../assets/img_2737_nw_d7487bda.jpeg';
import img21 from '../assets/img_2738_nw_746aaedf.jpeg';
import img22 from '../assets/img_2740_nw_849d0e17.jpeg';

// Create an array of all images
const images = [
  { src: img1, alt: "Free resource 1" },
  { src: img2, alt: "Free resource 2" },
  { src: img3, alt: "Free resource 3" },
  { src: img4, alt: "Free resource 4" },
  { src: img5, alt: "Free resource 5" },
  { src: img6, alt: "Free resource 6" },
  { src: img7, alt: "Free resource 7" },
  { src: img8, alt: "Free resource 8" },
  { src: img9, alt: "Free resource 9" },
  { src: img10, alt: "Free resource 10" },
  { src: img11, alt: "Free resource 11" },
  { src: img12, alt: "Free resource 12" },
  { src: img13, alt: "Free resource 13" },
  { src: img14, alt: "Free resource 14" },
  { src: img15, alt: "Free resource 15" },
  { src: img16, alt: "Free resource 16" },
  { src: img17, alt: "Free resource 17" },
  { src: img18, alt: "Free resource 18" },
  { src: img19, alt: "Free resource 19" },
  { src: img20, alt: "Free resource 20" },
  { src: img21, alt: "Free resource 21" },
  { src: img22, alt: "Free resource 22" },
];
---

<div class="mb-6 -mt-2 -mx-2">
  <div class="scrapbook-photo w-full" style="--rotate: 0deg;">
    <div class="scrapbook-tape"></div>
    <div class="relative">
      <!-- Main Gallery -->
      <div class="overflow-x-auto hide-scrollbar gallery-scroll pb-4 snap-x snap-mandatory">
        <div class="flex gap-4 min-w-max">
          {images.map((image, index) => (
            <div 
              class="snap-start shrink-0 w-[280px] h-[200px] rounded overflow-hidden gallery-item"
            >
              <Image 
                src={image.src} 
                alt={image.alt} 
                class="w-full h-full object-cover"
                width={280}
                height={200}
              />
            </div>
          ))}
        </div>
      </div>

      <!-- Navigation Controls -->
      <button 
        id="prevBtn" 
        class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-2 shadow-md z-10"
        aria-label="Previous image"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M15 18l-6-6 6-6"></path>
        </svg>
      </button>
      <button 
        id="nextBtn" 
        class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-2 shadow-md z-10"
        aria-label="Next image"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 18l6-6-6-6"></path>
        </svg>
      </button>
    </div>
  </div>
  
  <!-- Caption and Title -->
  <div class="text-center mt-4">
    <h3 class="font-display font-bold text-lg mb-1">Free Resources Gallery</h3>
    <p class="italic text-sm text-gray-600">
      Browse through our collection of free entrepreneurial resources and materials to help you overcome roadblocks
    </p>
  </div>
</div>

<!-- Add scrollbar styles -->
<style>
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .hide-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;     /* Firefox */
  }
  
  /* Additional styling for the gallery */
  .gallery-scroll {
    scroll-behavior: smooth;
    padding-bottom: 10px;
  }
</style>

<!-- Add navigation functionality -->
<script>
  // Initialize gallery navigation
  document.addEventListener('DOMContentLoaded', () => {
    initializeGallery();
  });
  
  // Also initialize on Astro page transitions
  document.addEventListener('astro:page-load', () => {
    initializeGallery();
  });
  
  function initializeGallery() {
    const scrollContainer = document.querySelector('.gallery-scroll');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    if (scrollContainer && prevBtn && nextBtn) {
      // Previous button click
      prevBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({ left: -300, behavior: 'smooth' });
      });
      
      // Next button click
      nextBtn.addEventListener('click', () => {
        scrollContainer.scrollBy({ left: 300, behavior: 'smooth' });
      });
      
      // Also allow keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          scrollContainer.scrollBy({ left: -300, behavior: 'smooth' });
        } else if (e.key === 'ArrowRight') {
          scrollContainer.scrollBy({ left: 300, behavior: 'smooth' });
        }
      });
      
      // Show/hide navigation buttons based on scroll position
      scrollContainer.addEventListener('scroll', () => {
        const isAtStart = scrollContainer.scrollLeft <= 10;
        const isAtEnd = scrollContainer.scrollLeft >= scrollContainer.scrollWidth - scrollContainer.clientWidth - 10;
        
        prevBtn.style.opacity = isAtStart ? '0.5' : '1';
        nextBtn.style.opacity = isAtEnd ? '0.5' : '1';
      });
    }
  }
</script>